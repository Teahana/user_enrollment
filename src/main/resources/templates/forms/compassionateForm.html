<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Application for Compassionate / Aegrotat Pass / Special Exam</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" th:href="@{/styles/completion_form.css}">
</head>
<body>
<div class="form-wrapper">
  <h1>Application for Compassionate / Aegrotat Pass / Special Exam</h1>

  <form th:action="@{/student/compassionate/submit}" method="post" enctype="multipart/form-data" th:object="${form}">

    <fieldset>
      <legend>What are you applying for?</legend>
      <label><input type="checkbox" name="applicationType" value="Compassionate Pass"> Compassionate Pass</label>
      <label><input type="checkbox" name="applicationType" value="Aegrotat Pass"> Aegrotat Pass</label>
      <label><input type="checkbox" name="applicationType" value="Special Examination"> Special Examination</label>
    </fieldset>

    <label for="reason">Reason for application:</label>
    <textarea id="reason" name="reason" required th:text="*{reason}"></textarea>

    <label for="documents">Attach supporting documents:</label>
    <input type="file" id="documents" name="documents" multiple>

    <label for="signature">Applicantâ€™s Signature:</label>
    <input type="text" id="signature" name="studentSignature" required th:value="*{studentSignature}">

    <label for="submissionDate">Date:</label>
    <input type="date" id="submissionDate" name="submissionDate" required th:value="*{submissionDate}">

    <fieldset>
      <legend>SECTION A: Personal Details</legend>

      <label for="lastName">Last Name:</label>
      <input type="text" id="lastName" name="lastName" th:value="${student.lastName}" readonly>

      <label for="firstName">First Name:</label>
      <input type="text" id="firstName" name="firstName" th:value="${student.firstName}" readonly>

      <label for="dob">Date of Birth:</label>
      <input type="date" id="dob" name="dob" th:value="*{dateOfBirth}">

      <label for="studentId">Student ID Number:</label>
      <input type="text" id="studentId" name="studentId" th:value="${student.studentId}" readonly>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" th:value="${student.email}" readonly>

      <label for="telephone">Telephone:</label>
      <input type="tel" id="telephone" name="telephone" th:value="${student.phoneNumber}" readonly>

      <label for="address">Address:</label>
      <textarea id="address" name="address" rows="3" th:text="${student.address}"></textarea>

      <label for="campus">Campus:</label>
      <input type="text" id="campus" name="campus" th:value="*{campus}">

      <label for="semesterYear">Semester / Year:</label>
      <input type="text" id="semesterYear" name="semesterYear" th:value="*{semesterYear}">
    </fieldset>

    <fieldset>
      <legend>SECTION B: Missed Exam Details</legend>
      <div id="examEntries">
        <div class="exam-group">
          <label>Course Code:
            <input type="text" name="courseCode" th:value="*{courseCode}" required>
          </label>
          <label>Exam Date:
            <input type="date" name="examDate" th:value="*{examDate}" required>
          </label>
          <label>Exam Time:
            <input type="time" name="examTime" th:value="*{examTime}" required>
          </label>
        </div>
      </div>
      <button type="button" onclick="addExam()">+ Add Another Exam</button>

    </fieldset>

    <fieldset>
      <legend>SECTION C: Application Details</legend>
      <p>Please explain the context of the issue clearly in the reason section above and attach official documents.</p>
      <p>Staff processing your form will verify this section using your evidence and will add recommendations separately.</p>
    </fieldset>

    <button type="submit">Submit Application</button>

  </form>
</div>

<script>
  function addExam() {
    const container = document.getElementById('examEntries');
    const newExam = container.firstElementChild.cloneNode(true);
    container.appendChild(newExam);
  }
</script>
</body>
</html>
